{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/deploy-gatsby-blog-in-github-pages","result":{"data":{"post":{"__typename":"MdxPost","slug":"/deploy-gatsby-blog-in-github-pages","title":"Deploy Gatsby blog in Github pages","date":"30.09.2020","tags":[{"name":"Gatsby","slug":"gatsby"},{"name":"Github Actions","slug":"github-actions"}],"description":"Defence Against the Dark Arts (abbreviated as DADA) is a subject taught at Hogwarts School of Witchcraft and Wizardry and Ilvermorny School of Witchcraft and Wizardry. In this class, students study and learn how to defend themselves against all aspects of the Dark Arts, including dark creatures, curses, hexes and jinxes (dark charms), and duelling.","canonicalUrl":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Deploy Gatsby blog in Github pages\",\n  \"date\": \"2020-09-30T00:00:00.000Z\",\n  \"description\": \"Defence Against the Dark Arts (abbreviated as DADA) is a subject taught at Hogwarts School of Witchcraft and Wizardry and Ilvermorny School of Witchcraft and Wizardry. In this class, students study and learn how to defend themselves against all aspects of the Dark Arts, including dark creatures, curses, hexes and jinxes (dark charms), and duelling.\",\n  \"tags\": [\"Gatsby\", \"Github Actions\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h4\", null, \"Building Blog with Gatsby\"), mdx(\"p\", null, \"Gatsby, is react based static site generator which also includes GraphQL, Use to build websites and apps. It has good performances and scalability. This is good alternative to Jekyll sites\\nbut much more easier than Jekyll site generator. It is freely available, and best for writing blog sites. Many blogs usually hosted in wordpress but many better options are there. Out of\\nthem Github Pages (gh-pages) is better option which is free. Therefore, portfolio and the static site can be hosted in same repository without having separate repositories for static site and portfolio. \"), mdx(\"p\", null, \"There are plenty of blog templates available in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/showcase/\"\n  }), \"Gatsby Show Case\"), \". There, selected templates that is easy to customized. For this blog site,\\nwhich uses \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/LekoArts/gatsby-starter-minimal-blog\"\n  }), \"LekoArts minimal starter blog\")), mdx(\"p\", null, \"To use gatsby development is required to install \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/gatsby\"\n  }), \"Gatsby package\"), \" for npm.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"# install gatsby \\nnpm i gatsby\\n\\n# create a new Gatsby site using the default starter blog\\ngatsby new my-blog-site https://github.com/LekoArts/gatsby-starter-minimal-blog\\n\\n# start development locally, it is now available at http://localhost:8000\\ncd project-name\\ngatsby develop\\n\")), mdx(\"p\", null, \"To start development locally run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby develop\"), \". It will started development server locally with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8000/\"), \". Once it is completed start writing content in directory \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/content/posts/<newDirectoryForPost>/index.mdx\")), mdx(\"h4\", null, \"Integrate Gatsby blog with GitHub pages\"), mdx(\"p\", null, \"Once the blog developed with several posts, then it can be published to gh-pages. It is important to verify site is locally running without any errors prior to deployment. Github Pages, publish\\nonly static HTML files therefore, these files should be available in root directory of the repository. But, when run command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby build\"), \" site build locally and moved to folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"public\"), \". Therefore,\\ngenerated site cannot be published directly into gh-pages(GitHub Pages). \"), mdx(\"p\", null, \"This site use access url as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<username>.github.io\"), \". So, repository will be in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<username>/<username>.github.io\"), \". Once\\nrepository is created in GitHub, next is to upload the contents for repo. There is npm module called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gh-pages\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"which publish these content to remote repository. Since focus on keeping\\nboth site and source in same repository, will use the below method\"), \" .\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"#instll gh-pages package in locally\\nnpm install gh-pages --save-dev\\n\")), mdx(\"p\", null, \" Initialialize git repository locally. And set the origin for publish to remote repo \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"(git remote set-url origin https://github.com/USERNAME/REPOSITORY.git)\"), \".  As for below, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"master\"), \" branch used for hosting static HTML files and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"develop\"), \" branch used for\\npublish sources.\"), mdx(\"p\", null, \"With \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gh-pages\"), \" plugin, generated site files can be uploaded. To do that, new script in package.json file should be created. Below is code snippet for that.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"scripts\\\": {\\n    \\\"deploy\\\": \\\"gatsby clean && gatsby build && gh-pages -d public -b master\\\"\\n  }\\n}\\n\\n# If separate repository use other than <username>/<username>.github.io then following should be used.\\n{\\n  \\\"scripts\\\": {\\n    \\\"deploy\\\": \\\"gatsby clean && gatsby build --prefix-paths && gh-pages -d public -b master\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"And also should update in gatsby-config.js file as well.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"module.exports = {\\n  pathPrefix: \\\"/reponame\\\",\\n}\\n\")), mdx(\"p\", null, \"Run command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run deploy\"), \", It will publish content to master branch of the repo. Then checkout another branch \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"develop\"), \" in locall repo. initialize with first commit and then push.\\nwith \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"git push -u origin develop\"), \". If there is custom domain, It should be add to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CNAME\"), \" file to the repository. Blog site can be accessed with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://<username>.gihub.io\"), \" or\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://<username>.gihub.io/<reponame>\")), mdx(\"h4\", null, \"Automate Blog site deployment with GitHub Actions\"), mdx(\"p\", null, \"It is straightforward to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run deploy\"), \" But, every time new changes happen, this command need to run. With help of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Continuous Integration\"), \", this\\nprocess can be automated. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Travis\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"GitHub Actions\"), \" are tools can use. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"GitHub Actions\"), \" are free therefore start with it. \"), mdx(\"p\", null, \"Before that, it is required to generated \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Personal Access Token\"), \". Under the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Profile-> Settings -> Developer Settings -> Personal Access Token\"), \". There,\\ngenerate a token with ticked with repo and workflow. Copy this token, then go to repo, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"repo Settings -> Secrets\"), \". Add new secret named \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ACCESS_TOKEN\"), \"\\nwith the copied value.\"), mdx(\"p\", null, \"There many plugin available for publishing with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gh-pages\"), \" in Github Actions but following instructions will be sufficient.\\nIn the local repo(develop) branch, create new file under the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".github/workflows/node.js.yml\"), \". It is the CI(Automation) configuration file. This automation happen\\nwhen someone push to changes to develop branch.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yml\"\n  }), \"# name of the configurations file\\nname: Node.js CI\\n\\n# Trigger automation when new commit received to develop branch\\non:\\n  push:\\n    branches: develop\\n\\njobs:\\n  build:\\n\\n    runs-on: ubuntu-latest\\n\\n# checkout source repository of develop branch\\n# secrets.ACCESS_TOKEN means personal access token created\\n\\n    steps:\\n    - uses: actions/checkout@v2\\n      with: \\n        repository: username/username.github.io\\n        ref: develop\\n        persist-credentials: false\\n        token: ${{ secrets.ACCESS_TOKEN }}\\n        fetch-depth: 0\\n\\n# Start with Node.js 12.x version\\n\\n    - name: Use Node.js '12.x'\\n      uses: actions/setup-node@v1\\n      with:\\n        node-version: '12.x'\\n#    - run: echo 'Before dependency installation in node js'\\n#    - run: ls\\n    - name: Update remote origin for gh-pages uploads\\n      env:\\n        ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\\n      run: |\\n        git config user.email \\\"user email\\\"\\n        git config user.name user name\\\"\\n        git remote set-url origin https://$ACCESS_TOKEN:x-oauth-basic@github.com/username/username.github.io.git\\n    - run: npm install\\n\\n# This command that was locally run.\\n    - run: npm run deploy\\n    \\n\")), mdx(\"p\", null, \"Once user added changes/modify to develop branch and push to remote, This automation will trigger and build, publish to master branch.\"), mdx(\"p\", null, \"\\u2663\", \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/docs/how-gatsby-works-with-github-pages/\"\n  }), \"How Gatsby work with GitHub Pages\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Building Blog with Gatsby Gatsby, is react based static site generator which also includes GraphQL, Use to build websites and apps. It hasâ€¦","timeToRead":2,"banner":null}},"pageContext":{"slug":"/deploy-gatsby-blog-in-github-pages","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["3090400250","3090400250","318001574"]}